<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>白六留言板 - 物理貼合修正版</title>
    <style>
        body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        
        .phone-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            aspect-ratio: 9 / 19.5;
            background: #111;
        }

        video#train-video {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
        }

        /* 牆面透視層：這是文字「貼」住的地方，座標絕對固定 */
        .wall-surface {
            position: absolute;
            top: 24%; /* 調整至綠板中心高度 */
            left: 5%;
            width: 90%;
            height: 40%;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            
            /* 強透視調整：讓文字右側大、左側小，並與綠板邊緣平行 */
            transform: perspective(1000px) rotateY(-48deg) skewY(-7deg);
            transform-origin: right center;
            pointer-events: none;

            /* 核心：物理遮罩。inset(上 右 下 左) */
            /* 初始狀態：左邊界為 100%，表示完全遮住文字 */
            clip-path: inset(0 0 0 100%);
        }

        .static-text {
            color: #ff0000; /* 配合您最新截圖的紅色 */
            font-size: 5rem; /* 放大文字以填滿綠板 */
            font-weight: 900;
            white-space: nowrap;
            /* 模擬噴漆質感：輕微模糊與環境光混合 */
            filter: blur(0.5px) drop-shadow(2px 2px 5px rgba(0,0,0,0.4));
            font-family: "Microsoft JhengHei", sans-serif;
        }

        /* 輸入介面 */
        .ui-panel {
            position: absolute;
            bottom: 20px;
            width: 90%;
            left: 5%;
            z-index: 10;
            display: flex;
            gap: 10px;
        }
    </style>
</head>
<body>

<div class="phone-container">
    <video id="train-video" playsinline>
        <source src="Train.mov" type="video/quicktime">
        <source src="Train.mov" type="video/mp4">
    </video>

    <div id="mask-gate" class="wall-surface">
        <div id="target-text" class="static-text">白六愛媽媽</div>
    </div>

    <div class="ui-panel">
        <input type="text" id="userInput" style="flex:1; border-radius:20px; padding:10px;" value="白六愛媽媽">
        <button onclick="startReveal()" style="border-radius:20px; padding:10px 20px;">播放</button>
    </div>
</div>

<script>
    const video = document.getElementById('train-video');
    const gate = document.getElementById('mask-gate');
    const text = document.getElementById('target-text');

    function startReveal() {
        text.innerText = document.getElementById('userInput').value;
        
        // 重置狀態
        gate.style.transition = 'none';
        gate.style.clipPath = 'inset(0 0 0 100%)';
        
        video.currentTime = 0;
        video.play();

        // 根據您的錄影時間點微調：
        // 3.51s 列車尾部開始露出綠色區域
        // 4.90s 列車完全離開畫面
        const start = 3.51;
        const end = 4.9;

        const update = () => {
            const now = video.currentTime;
            
            if (now >= start && now <= end) {
                // 計算揭曉進度 (0 到 1)
                const progress = (now - start) / (end - start);
                // 遮罩的左邊界（第4個參數）從 100% 變為 0%
                const revealLeft = 100 - (progress * 100);
                gate.style.clipPath = `inset(0 0 0 ${revealLeft}%)`;
            } else if (now > end) {
                gate.style.clipPath = 'inset(0 0 0 0%)';
            }

            if (!video.paused && !video.ended) {
                requestAnimationFrame(update);
            }
        };

        requestAnimationFrame(update);
    }
</script>
</body>
</html>
